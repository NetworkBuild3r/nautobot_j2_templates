!
no ip domain lookup
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service password-encryption
service call-home
hostname phx-ios01

enable secret {{ "enable secret" | get_secret_by_secret_group_name("secret") }}
logging console warnings
vtp mode off
lldp run!
aaa new-model

aaa authentication ppp default group radius
aaa authentication dot1x default group radius
aaa authentication login vty group tacacs+ local
aaa authentication login console enable
aaa authentication login default group tacacs+ local-case
aaa authentication banner ^CWelcome to the network^C
aaa authentication enable default group tacacs+ enable
aaa authentication fail_message ^CAuthentication failed^C

aaa authorization exec default group tacacs+ if-authenticated
aaa authorization network default group radius
aaa authorization commands 0 default group tacacs+
aaa authorization commands 15 default group tacacs+
aaa authorization auth_proxy default group radius
aaa authorization reverse_access default group tacacs+
aaa authorization config_commands default group tacacs+

aaa accounting exec default vty start-stop group tacacs+
aaa accounting dot1x default start-stop group radius
aaa accounting system default start-stop group tacacs+
aaa accounting network default start-stop group radius
aaa accounting commands 0 default vty start-stop group tacacs+
aaa accounting commands 15 default vty start-stop group tacacs+
aaa accounting connection default start-stop group tacacs+

aaa group server radius default
 server name RADIUS-SERVER1
aaa group server tacacs+ default
 server name SCA-ISE-PSN01
 server name SCA-ISE-PSN02
 server name PEDC-ISE-PSN01
 server name PEDC-ISE-PSN02

tacacs server SCA-ISE-PSN01
 address ipv4 10.9.64.14
 key {{ secrets_group["name"] | get_secret_by_secret_group_name(server.name | lower | replace("-", "_") ~ "_key") | default("tacacs_key") }}tacacs server SCA-ISE-PSN02
 address ipv4 10.9.64.17
 key {{ secrets_group["name"] | get_secret_by_secret_group_name(server.name | lower | replace("-", "_") ~ "_key") | default("tacacs_key") }}tacacs server PEDC-ISE-PSN01
 address ipv4 10.9.192.27
 key {{ secrets_group["name"] | get_secret_by_secret_group_name(server.name | lower | replace("-", "_") ~ "_key") | default("tacacs_key") }}tacacs server PEDC-ISE-PSN02
 address ipv4 10.9.192.28
 key {{ secrets_group["name"] | get_secret_by_secret_group_name(server.name | lower | replace("-", "_") ~ "_key") | default("tacacs_key") }}
aaa session-id common
aaa accounting update <built-in method update of dict object at 0x7ad0556b07c0>
tacacs-server deadtime 5
!
ip name-server 10.9.192.15 10.9.64.9
ip domain list net.dirsrv.com
ip domain name net.dirsrv.com
ip domain lookup source-interface Vlan1000!
vlan 2
  name CORP_DATA
vlan 102
  name VOICE
vlan 1000
  name MANAGEMENT
!
!spanning-tree mode rapid-pvstspanning-tree extend system-idspanning-tree vlan 1-4094 priority 61440!
errdisable recovery cause udld
errdisable recovery cause bpduguard
errdisable recovery cause storm-control
errdisable recovery interval 900!

interface GigabitEthernet1
 ip address 192.168.0.1 255.255.255.254
 no shutdown
!

interface GigabitEthernet2
 ip address 192.168.0.7 255.255.255.254
 no shutdown
!

interface GigabitEthernet3
 no shutdown
!

interface GigabitEthernet4
 ip address 10.252.140.222 255.255.255.0
 no shutdown
!

interface GigabitEthernet5
 switchport access vlan 2
 switchport mode access
 storm-control broadcast level bps 40
 spanning-tree portfast
 spanning-tree bpduguard enable
 ip dhcp snooping limit rate 30
 no shutdown
!

interface GigabitEthernet6
 switchport trunk native vlan 1000
 switchport trunk allowed vlan 2,102
 switchport mode trunk
 switchport nonegotiate
 storm-control broadcast level bps 20m
storm-control action shutdown

channel-group 1 mode active
 no shutdown
!

interface Loopback0
 ip address 10.0.0.2 255.255.255.255
 no shutdown
!

interface Port-channel1
 switchport trunk native vlan 1000
 switchport trunk allowed vlan 2,102
 switchport mode trunk
 switchport nonegotiate
 storm-control broadcast level bps 20m
storm-control action shutdown

 no shutdown
!

! SNMP
     ip access-list standard SNMP_ACCESS_ACL
      10 remark "DNA Center"
      10 permit 10.9.126.84
      20 remark "DNA Center"
      20 permit 10.9.126.87
      30 remark "DNA Center"
      30 permit 10.9.126.81
      40 remark "DNA Center"
      40 permit 10.9.126.82
      50 remark "GBSA SevOne Pollers"
      50 permit 10.100.55.0 0.0.0.15
      60 remark "PEDC SevOne Pollers"
      60 permit 10.100.55.16 0.0.0.15
      70 remark "PEDC Cisco Prime"
      70 permit 10.1.100.111
      80 remark "SCA Cisco Prime"
      80 permit 10.9.64.22
      90 deny   any log

     ! Define location_parts at the top

     ! SNMP Community Strings:
     snmp-server community {{ secrets_groups | selectattr('name', 'equalto', '{{ comm.secret_group }}') | first | get_secret_by_secret_group_name('community') | default('<SNMP_COMMUNITY>') }} RO SNMP_ACCESS_ACL
     snmp-server community {{ secrets_groups | selectattr('name', 'equalto', '{{ comm.secret_group }}') | first | get_secret_by_secret_group_name('community') | default('<SNMP_COMMUNITY>') }} RW SNMP_ACCESS_ACL

     ! SNMP Trap Source, Contact, and Location:
     snmp-server trap-source Vlan1000
     snmp-server contact "Telecom Operations 920-272-9555"
     snmp-server location AHEAD LAB Telecom Room Row F Rack F8

     ! Enabled SNMP Traps:
     snmp-server enable traps snmp authentication
     snmp-server enable traps linkdown
     snmp-server enable traps linkup
     snmp-server enable traps coldstart
     snmp-server enable traps warmstart
     snmp-server enable traps flowmon
     snmp-server enable traps entity-perf
     snmp-server enable traps call-home
     snmp-server enable traps tty
     snmp-server enable traps auth-framework sec-violation
     snmp-server enable traps rep
     snmp-server enable traps vtp
     snmp-server enable traps vlancreate
     snmp-server enable traps vlandelete
     snmp-server enable traps port-security
     snmp-server enable traps license
     snmp-server enable traps smart-license
     snmp-server enable traps cpu threshold
     snmp-server enable traps memory bufferpeak
     snmp-server enable traps stackwise
     snmp-server enable traps udld
     snmp-server enable traps fru-ctrl
     snmp-server enable traps flash insertion removal
     snmp-server enable traps energywise
     snmp-server enable traps power-ethernet
     snmp-server enable traps entity
     snmp-server enable traps envmon
     snmp-server enable traps bfd
     snmp-server enable traps config-copy
     snmp-server enable traps config
     snmp-server enable traps config-ctid
     snmp-server enable traps dhcp
     snmp-server enable traps event-manager
     snmp-server enable traps ipmulticast
     snmp-server enable traps msdp
     snmp-server enable traps pim neighbor-change
     snmp-server enable traps rp-mapping-change
     snmp-server enable traps invalid-pim-message
     snmp-server enable traps bridge newroot
     snmp-server enable traps topologychange
     snmp-server enable traps stpx inconsistency
     snmp-server enable traps root-inconsistency
     snmp-server enable traps loop-inconsistency
     snmp-server enable traps syslog
     snmp-server enable traps vlan-membership
     snmp-server enable traps errdisable
     snmp-server enable traps rf
     snmp-server enable traps transceiver
     snmp-server enable traps bulkstat collection transfer
     snmp-server enable traps mac-notification change move threshold
     snmp-server enable traps vrfmib vrf-up
     snmp-server enable traps vrfmib vrf-down
     snmp-server enable traps vnet-trunk-up
     snmp-server enable traps vnet-trunk-down

     ! SNMP Host Entries:
     snmp-server host 10.100.55.20 {{ secrets_groups | selectattr('name', 'equalto', '{{ entry.secret_group }}') | first | get_secret_by_secret_group_name('community') | default('<SNMP_COMMUNITY>') }}
     snmp-server host 10.100.55.4 {{ secrets_groups | selectattr('name', 'equalto', '{{ entry.secret_group }}') | first | get_secret_by_secret_group_name('community') | default('<SNMP_COMMUNITY>') }}
     snmp-server host 10.9.126.84 {{ secrets_groups | selectattr('name', 'equalto', '{{ entry.secret_group }}') | first | get_secret_by_secret_group_name('community') | default('<SNMP_COMMUNITY>') }}
!
! 
banner login^CCC
  ********************************************************************
  *                        ---  WARNING  ---                         *
  *      THIS COMPUTER IS FOR WEC ENERGY GROUP USE ONLY!             *
  *                                                                  *
  *  You are attempting to access a company owned computer system.   *
  *  Unauthorized users must exit immediately. All use, whether for  *
  *  business or personal, is monitored.  By accessing this system,  *
  *  you acknowledge that you have reviewed the company's Acceptable *
  *  Use Policy for Corporate Electronic Resources, and thereby      *
  *  agree to act in accordance with this policy.  Unauthorized use  *
  *  or use that violates this policy may subject you to adverse     *
  *  action, which could include civil or criminal liability.        *
  *                                                                  *
  ********************************************************************
^C
!!
!
vrf definition Mgmt-vrf
  address-family ipv4
  exit-address-family
  address-family ipv6
  exit-address-family
!
!
!
ip access-list standard VTY_ACCESS_ACL	
 10 permit 10.0.0.0 0.255.255.255	
 20 permit 192.168.0.0 0.0.255.255	
 30 deny   any log	
!
line con 0
 exec-timeout 15 0
 logging synchronous
 login authentication console
 stopbits 1
line vty 0 4
 access-class VTY_ACCESS_ACL in
 exec-timeout 15 0
 accounting commands 0 vty
 accounting commands 15 vty
 accounting exec vty
 logging synchronous
 transport input ssh
line vty 5 15
 access-class VTY_ACCESS_ACL in
 exec-timeout 15 0
 accounting commands 0 vty
 accounting commands 15 vty
 accounting exec vty
 logging synchronous
 transport input ssh
line vty 16 31
 transport input ssh
!
!
ip default-gateway 10.4.1.1
ip http server
ip http authentication local
ip http secure-server
ip http client source-interface Vlan1000
ip forward-protocol nd
ip tacacs source-interface Vlan1000
ip ssh source-interface Vlan1000
ip ssh version 2
!!
!
ntp server ntp.comp.dirsrv.com
logging source-interface Vlan1000
logging host 10.9.102.41
!